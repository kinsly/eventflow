import{r,j as e,a as j}from"./app-nNOKH99h.js";import{g as h,a as w,i as M,b as _,c as B}from"./DateJsUtils-BF0pwWUS.js";import{b as E}from"./module-B0GYdjgo.js";import{A as $}from"./AuthenticatedLayout-DuWjuuyT.js";import{B as A,Q as D}from"./react-toastify.esm-BqJ5za_l.js";import{d as f}from"./dayjs.min-CnlO95f7.js";import T from"./MonthBar-BxDpkRAN.js";import"./customParseFormat-C2VT_rEb.js";import"./emotion-unitless.esm-sScrWPmR.js";import"./BackBtn-C3HNZR8l.js";import"./AlertForm-Bh_VkF13.js";import"./clsx-B-dksMZM.js";function F({event:t}){const[l,a]=r.useState(!1);return e.jsxs(j,{href:route("events.show",[t.id]),className:`relative py-3 rounded-xl mt-2 ml-5 mr-2 inline-flex flex-col  ${t.completed?"line-through":""}  ${l?"bg-blue-800":"bg-blue-400"} text-white px-5 py-1`,onClick:()=>a(!0),children:[e.jsx("span",{"data-cy":"event-name",className:"p-0 text-base leading-none",children:t.name}),t.start_time&&e.jsxs("span",{className:"p-0 text-sm leading-none","data-cy":"event-times",children:[h(t.start_time)," - ",h(t.end_time)]})]})}function I(){return e.jsx(E,{visible:!0,height:"50",width:"50",color:"red",ariaLabel:"three-circles-loading",wrapperStyle:{},wrapperClass:""})}function g({action:t}){const[l,a]=r.useState(!1);return e.jsx(j,{href:t,"data-cy":"add-event-btn",className:"fixed bottom-4 right-4 md:right-1/3",onClick:()=>a(!0),children:e.jsx("span",{className:"inline-flex items-center justify-center rounded-full text-green-700 p-2",children:l?e.jsx(I,{}):e.jsx("i",{className:"fa-solid fa-circle-plus text-5xl text-red-600"})})})}function H({session:t,auth:l,flash:a,allEvents:p}){const m=r.useRef(null),[b,N]=r.useState([]);r.useEffect(()=>{const c=setTimeout(()=>{v()},1e3);return()=>clearTimeout(c)},[]),r.useEffect(()=>{a.success_message&&A(a.success_message)},[a]);function y(){return m.current||(m.current=new Map),m.current}const v=()=>{p.map(i=>{i.months.map(x=>{x.days.map(s=>{N(u=>[...u,s.date])})})});const c=f().format("YYYY-MM-DD"),n=b.filter(i=>f(i)>=f(c));return n.length>0?n[0]:n.length===0?null:n[0]};return e.jsxs($,{user:l.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"All Events "}),backBtn:"",session:t,children:[e.jsx(D,{}),e.jsxs("div",{className:"bg-white p-0",children:[p.map((c,n)=>e.jsx("div",{children:c.months.map((i,x)=>e.jsxs(r.Fragment,{children:[e.jsx(T,{monthName:w(parseInt(i.month))}),i.days.map((s,u)=>e.jsxs("div",{className:"grid grid-cols-5",id:s.date,ref:o=>{const d=y();o?d.set(s.date,o):d.delete(s.date)},children:[e.jsx("div",{className:"col-span-1 flex flex-col items-center p-2",children:e.jsxs("span",{className:`${M(s.date)?"bg-blue-400":"bg-slate-400"} ml-2 text-white font-bold py-2 px-5 rounded-xl min-w-fit`,children:[e.jsx("div",{className:"text-center text-2xl",children:_(s.date)}),e.jsx("div",{className:"text-center text-sm font-semibold",children:B(s.date)})]})}),e.jsx("div",{className:"col-span-4 flex flex-col",children:s.events.map((o,d)=>e.jsx(r.Fragment,{children:e.jsx(F,{event:o})},d))})]},u))]},x))},n)),t.selected_business?e.jsx(g,{action:route("events.add",t.selected_business)}):e.jsx(g,{action:route("events.add")})]})]})}export{H as default};
