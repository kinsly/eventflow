import{r as x,j as e,Y as k,y as C}from"./app-nNOKH99h.js";import{A as w}from"./AuthenticatedLayout-DuWjuuyT.js";import{I as d}from"./InputLabel-pmu_96lA.js";import{T as u}from"./TextInput-BeOhOwRp.js";import{T,a as g}from"./TextAreaInput-Bi2SGvMN.js";import{P as S,D as I}from"./Payment-CEftT4BV.js";import{d as f}from"./dayjs.min-CnlO95f7.js";import{P}from"./PrimaryButton-BVPKKakc.js";import{I as c}from"./InputError-CvwNwlWB.js";import"./BackBtn-C3HNZR8l.js";import"./AlertForm-Bh_VkF13.js";import"./module-B0GYdjgo.js";import"./emotion-unitless.esm-sScrWPmR.js";import"./clsx-B-dksMZM.js";import"./customParseFormat-C2VT_rEb.js";function Q({auth:j,errors:i,session:p}){const[b,Y]=x.useState(f().format("hh:mm:ss A"));x.useState([]);const h="bg-white mx-2 my-3 rounded-xl px-3 py-3 pb-10 space-y-6 shadow-xl",[n,m]=x.useState({name:"",description:"",date:f().format("YYYY-MM-DD"),start_time:"",end_time:"",all_day:!1,telephone_1:"",telephone_2:"",cost:null,payments:[],business_id:p.selected_business}),r=(t,s)=>{m(a=>({...a,[t]:s})),console.log(n)},v=(t,s)=>{m(a=>{const l=a.payments.map(o=>s==parseInt(o.component_id)?{...o,date:t}:o);return{...a,payments:l}})},y=(t,s)=>{m(a=>{const l=a.payments.map(o=>s==parseInt(o.component_id)?{...o,deposit:t}:o);return{...a,payments:l}})},_=t=>{t.preventDefault();var s=route("events.store");C.visit(s,{method:"post",data:n,replace:!1,preserveState:!0,preserveScroll:!0,onSuccess:a=>{}})},N=()=>{m(t=>{const s=Object.keys(t.payments).length.toString();var a={id:"",date:f().format("YYYY-MM-DD"),event_id:"",deposit:0,component_id:s};return{...t,payments:[...t.payments,a]}})},D=t=>{m(s=>({...s,payments:s.payments.filter(a=>parseInt(a.component_id)!=t)}))};debugger;return e.jsxs(w,{user:j.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Add Event "}),backBtn:route("events",[p.selected_year,p.selected_business]),session:p,children:[e.jsx(k,{title:"Add Task or Event"}),e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:h,children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"name",value:"Name"}),e.jsx(u,{id:"name",value:n.name,onChange:t=>r("name",t.target.value),type:"text",className:"mt-1 block w-full",autoComplete:"Name","data-cy":"name"}),e.jsx(c,{message:i.name,className:"mt-2","data-cy":"error-name"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"description",value:"Description"}),e.jsx(T,{id:"description",onChange:t=>r("description",t.target.value),className:"mt-1 block w-full","data-cy":"description"}),e.jsx(c,{message:i.description,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"telephone_1",value:"Contact Numbers"}),e.jsx(u,{id:"telephone_1",value:n.telephone_1,onChange:t=>r("telephone_1",t.target.value),type:"tel",className:"mt-1 block w-full",placeholder:"contact number 1","data-cy":"telephone_1"}),e.jsx(u,{id:"telephone_2",value:n.telephone_2,onChange:t=>r("telephone_2",t.target.value),type:"tel",className:"mt-3 block w-full",placeholder:"contact number 2","data-cy":"telephone_2"})]})]}),e.jsxs("div",{className:h,children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"cost",value:"Cost"}),e.jsx(u,{id:"cost",value:n.cost?n.cost:"",onChange:t=>r("cost",t.target.value),type:"number",className:"mt-1 block w-full",autoComplete:"cost","data-cy":"cost"}),e.jsx(c,{message:i.cost,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex",children:[e.jsx(d,{htmlFor:"deposits",value:"Deposits"}),e.jsx("button",{type:"button","data-cy":"btn-add-deposit",onClick:()=>N(),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-4 rounded text-xl mb-2 ml-5",id:"editButton",children:e.jsx("i",{className:"fa-regular fa-plus"})})]}),n.payments.map((t,s)=>e.jsx("div",{children:e.jsx(S,{component_id:t==null?void 0:t.component_id,defaultDate:t.date,defaultPayment:t.deposit,payment_id:t.id,onChangeDate:(a,l)=>v(a,l),onChangeDeposit:(a,l)=>y(a,l),onDepositRemove:a=>D(a)},s)},s)),e.jsx(c,{message:i.deposit,className:"mt-2"})]})]}),e.jsxs("div",{className:h,children:[e.jsxs("div",{className:"ml-1",children:[e.jsx(d,{value:"Select Date"}),e.jsx(I,{label:"Select Date",onDateChange:t=>r("date",t)})]}),e.jsx(d,{value:`Event Time -  now::(${b})`}),e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,onChange:t=>r("all_day",t.target.checked),"data-cy":"all-day",className:"sr-only peer"}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"}),e.jsx("span",{className:"ms-3 text-xl font-medium text-gray-900 dark:text-gray-300",children:"All Day"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx(g,{label:"Start Time",onTimeChange:t=>r("start_time",t)}),e.jsx(c,{message:i.start_time,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(g,{label:"End Time",onTimeChange:t=>r("end_time",t)}),e.jsx(c,{message:i.end_time,className:"mt-2"})]})]}),e.jsx("div",{className:"text-center",children:e.jsx(P,{processing:!1,disabled:!1,"data-cy":"submit",children:"Create new Event "})})]})]})]})}export{Q as default};
