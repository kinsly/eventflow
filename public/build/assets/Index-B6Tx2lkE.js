import{j as e,r as i,y as j,Y as y}from"./app-nNOKH99h.js";import{A as R}from"./AuthenticatedLayout-DuWjuuyT.js";import"./BackBtn-C3HNZR8l.js";import"./AlertForm-Bh_VkF13.js";import"./dayjs.min-CnlO95f7.js";import"./module-B0GYdjgo.js";import"./emotion-unitless.esm-sScrWPmR.js";function w({children:l,showAlert:r,alertClose:s}){return e.jsx("div",{className:`${r?"":"hidden"}`,children:e.jsx("div",{className:"fixed inset-0 bg-gray-700 bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-xl w-full max-w-md ml-2 mr-2",children:e.jsxs("div",{className:"p-6 relative",children:[e.jsx("button",{onClick:s,className:"absolute right-0 top-1 mr-4 mt-4 text-gray-500 hover:text-gray-700","aria-label":"Close",children:"x"}),l]})})})})}function C({showAlert:l,handleAlertClose:r,user:s,roles:o}){const[c,x]=i.useState(""),[h,p]=i.useState(!1),[u,b]=i.useState({}),[n,m]=i.useState(null);i.useEffect(()=>{m(s)},[s]);const g=t=>{x(t)},f=()=>{p(!0),j.visit(route("userRoles.store"),{method:"post",data:{role:c,user_id:s==null?void 0:s.id},replace:!0,preserveState:!0,preserveScroll:!0,only:["users"],onSuccess:t=>{p(!1);var a={created_at:"",guard_name:"",id:"1",name:c,updated_at:""};m(d=>({...d,roles:d.roles.concat(a)}))}})},v=t=>{b(a=>({...a,[t]:!0})),j.visit(route("userRoles.delete"),{method:"delete",data:{role:t,user_id:s==null?void 0:s.id},replace:!1,preserveState:!0,preserveScroll:!0,only:["users"],onSuccess:a=>{b(d=>({...d,[t]:!1})),m(d=>({...d,roles:d.roles.filter(N=>N.name!==t)}))}})};return e.jsx(w,{showAlert:l,alertClose:r,children:e.jsxs("div",{className:"w-full bg-white p-1",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("p",{className:"text-xl font-bold",children:s==null?void 0:s.name})}),e.jsxs("p",{className:"mb-4",children:[" ",s==null?void 0:s.email," "]}),e.jsx("div",{className:"flex items-center mb-4",children:e.jsx("div",{className:"flex flex-col flex-wrap mr-4",children:n==null?void 0:n.roles.map((t,a)=>e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2",children:t.name}),e.jsx("button",{className:"text-red-500",onClick:()=>v(t.name),disabled:u[t.name],children:u[t.name]?"processing..":"Delete"})]},a))})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Add User Roles"}),e.jsxs("div",{className:"flex",children:[e.jsxs("select",{onChange:t=>g(t.target.value),className:"w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded",children:[e.jsx("option",{value:"select",children:"Select"}),o.map((t,a)=>e.jsx("option",{value:t,children:t},a))]}),e.jsx("button",{disabled:h,onClick:f,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded ml-2",children:h?"Processing..":"Add"})]})]})]})})}function S({user:l,userCardClick:r}){const s=()=>{r(l)};return e.jsx("div",{onClick:s,className:"mb-2 mt-2  bg-white shadow-md rounded-md",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between space-x-4 p-2",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-lg font-semibold",children:l.name})}),e.jsx("div",{className:"space-x-3",children:l.roles.map((o,c)=>e.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded-full text-xs",children:o.name},c))})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Email: ",l.email]})]})})}function M({auth:l,users:r,roles:s,session:o}){const[c,x]=i.useState(!1),[h,p]=i.useState(null),u=()=>{x(!1)},b=n=>{x(!0),p(n)};return e.jsxs(R,{backBtn:"",user:l.user,session:o,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Manage User Roles"}),children:[e.jsx(y,{title:"Manage User Roles"}),r.map((n,m)=>e.jsx("span",{children:e.jsx(S,{user:n,userCardClick:g=>b(g)})},m)),e.jsx(C,{roles:s,user:h,showAlert:c,handleAlertClose:u})]})}export{M as default};
