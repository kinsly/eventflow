import{r as n,j as e,a as C,y as m}from"./app-nNOKH99h.js";import{A as E}from"./AlertAreYouSure-CmgnamVE.js";import k from"./ShowEventPayments-BYvuD8me.js";import{A as B}from"./AuthenticatedLayout-DuWjuuyT.js";import{a as M,b as P,d as T,g as f}from"./DateJsUtils-BF0pwWUS.js";import{Q as R,B as u}from"./react-toastify.esm-BqJ5za_l.js";import"./SecondaryButton-DoznTbLa.js";import"./BackBtn-C3HNZR8l.js";import"./AlertForm-Bh_VkF13.js";import"./dayjs.min-CnlO95f7.js";import"./module-B0GYdjgo.js";import"./emotion-unitless.esm-sScrWPmR.js";import"./customParseFormat-C2VT_rEb.js";import"./clsx-B-dksMZM.js";function W({auth:y,event:t,session:r}){var x,h;const[o,l]=n.useState(!1),[d,p]=n.useState(!1),[g,i]=n.useState(!1),j=t.day.month.year.year,N=M(parseInt(t.day.month.month)),b=P(t.day.date),_=T(t.day.date),S=()=>{l(!0),m.visit(route("events.complete",[t.id]),{method:"post",data:{event_id:t.id},replace:!1,preserveState:!0,preserveScroll:!0,onSuccess:s=>{u(s.props.flash.success_message),l(!1)}})},v=()=>{l(!0),m.visit(route("events.undoComplete",[t.id]),{method:"post",data:{event_id:t.id},replace:!1,preserveState:!0,preserveScroll:!0,onSuccess:s=>{u(s.props.flash.success_message),l(!1)}})},A=()=>{i(!1)},D=()=>{i(!0)},w=()=>{p(!0),m.visit(route("events.delete",[t.id]),{method:"delete",data:{event_id:t.id},replace:!1,preserveState:!1,preserveScroll:!0,onSuccess:s=>{i(!1),p(!1)}})};var a=0,c=0;return(x=t.payments)==null||x.map(s=>{c=c+s.deposit}),a=(t.cost??0)-c,a=a>=0?a:0,e.jsxs(B,{user:y.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Event Details"}),backBtn:route("events",[r.selected_year,r.selected_business]),session:r,children:[e.jsx(R,{}),e.jsx("div",{className:"bg-gray-100 flex items-center justify-center m-2",children:e.jsxs("div",{className:`p-4 mx-auto bg-white rounded-xl  space-y-4 relative shadow-lg
              md:space-y-6 lg:space-y-6  lg:text-xl`,children:[e.jsx(C,{href:route("events.edit",[t.id]),"data-cy":"event-edit",className:"absolute top-3 right-3 text-green-500 font-bold text-l underline",children:"Edit"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-gray-500 text-l",children:[e.jsx("span",{id:"year",children:j})," ",e.jsx("span",{id:"month",children:N})]}),e.jsx("div",{className:"text-4xl font-semibold",id:"day",children:b}),e.jsx("div",{className:"text-gray-500 text-l",id:"dayName",children:_})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xl font-extrabold text-center",id:"eventDescription","data-cy":"name",children:t.name}),t.description&&e.jsx("div",{className:"text-gray-600 text-xl px-2 py-5 text-center","data-cy":"description",id:"eventDescription",children:t.description}),t.start_time||t.end_time?e.jsxs("div",{className:"flex justify-between text-l text-gray-500 gap-3",children:[t.start_time&&e.jsxs("span",{id:"eventStartTime","data-cy":"from",children:["From: ",f(t.start_time)]}),t.end_time&&e.jsxs("span",{id:"eventEndTime","data-cy":"to",children:["To: ",f(t.end_time)]})]}):""]}),t.telephone_1||t.telephone_2?e.jsxs("div",{className:"flex gap-4 justify-between py-3 px-4 text-l font-semibold text-blue-600 bg-green-50",children:[t.telephone_1&&e.jsxs("a",{href:`tel:${t.telephone_1}`,"data-cy":"telephone_1",children:[e.jsx("i",{className:"fa-solid fa-phone-volume"})," ",t.telephone_1]}),t.telephone_2&&e.jsxs("a",{href:`tel:${t.telephone_2}`,"data-cy":"telephone_2",children:[e.jsx("i",{className:"fa-solid fa-phone-volume"})," ",t.telephone_2]})]}):"",t.cost&&e.jsxs("div",{className:"flex flex-col mb-4",children:[e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"font-semibold",children:"Cost:"}),e.jsxs("p",{className:"ml-5","data-cy":"cost",children:["Rs: ",t.cost,"/="]})]}),e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"",children:"Balance:"}),e.jsxs("p",{className:"ml-5","data-cy":"balance",children:["Rs: ",a,"/="]})]})]}),((h=t.payments)==null?void 0:h.length)!==0&&e.jsx(k,{payments:t.payments}),e.jsxs("div",{className:"flex flex-col space-x-2 justify-center",children:[!t.completed&&e.jsxs("button",{disabled:o,onClick:S,className:"bg-green-500 hover:bg-green-700 text-white py-1 px-4 my-2 text-l rounded",id:"completedButton",children:[e.jsx("i",{className:"fa-solid fa-check"})," ",o?"processing..":"Mark as Completed"]}),t.completed?e.jsxs("button",{disabled:o,onClick:v,className:"bg-green-500 hover:bg-green-700 text-white py-1 px-4 my-2 text-l rounded",id:"completedButton",children:[e.jsx("i",{className:"fa-solid fa-rotate-left"})," undo Completed"]}):"",e.jsx(E,{processing:d,onAlertClose:A,isAlert:g,onAlertDelete:w}),e.jsxs("button",{onClick:D,disabled:d,className:`${d?"bg-red-300":"bg-red-500"} hover:bg-red-700 text-white font-bold py-1 px-4 text-l rounded`,id:"deleteButton",children:[e.jsx("i",{className:"fa-solid fa-trash-can"})," Delete"]})]})]})})]})}export{W as default};
